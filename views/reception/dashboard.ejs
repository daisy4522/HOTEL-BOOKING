<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="/styles/dash.css" />
  </head>
  <body>
    <%- include('header.html') %>
    <h1>Receptionist Dashboard</h1>
    <section class="bookings">
      <h2>Recent Bookings(past 5 days)</h2>
      <div class="dash-stats">
        <div class="stat">
          <h3>Total Bookings</h3>
          <p><%= totalBookings %></p>
        </div>
        <div class="stat">
          <h3>Check-ins</h3>
          <p><%= checkins %></p>
        </div>
        <div class="stat">
          <h3>Check-outs</h3>
          <p><%= checkouts %></p>
        </div>
        <div class="dash-stat">
          <h3>Total Bookings</h3>
          <p><%= spotbookings.length + roombookings.length%></p>
        </div>
        <div class="dash-stat">
          <h3>Room Bookings</h3>
          <p><%= roombookings.length %></p>
        </div>
        <div class="dash-stat">
          <h3>Spot Bookings</h3>
          <P><%= spotbookings.length %></P>
        </div>
        <div class="dash-stat">
          <h3>Current checkins</h3>
          <p><%= totalCheckins %></p>
        </div>
      </div>

      <h3>Spots</h3>
      <table class="spot-bookings-table">
        <tr>
          <th>Booking ID</th>
          <th>Client Name</th>
          <th>spot name</th>
          <th>Booking Date</th>
          <th>Booking status</th>
          <th>Payment status</th>
          <th>Actions</th>
        </tr>
        <% spotbookings.forEach(booking => { %>
        <tr>
          <td><%= booking.id %></td>
          <td><%= booking.clientName %></td>
          <td><%= booking.spotName %></td>
          <td><%= booking.bookingDate.toDateString() %></td>
          <td><%= booking.status %></td>
          <td><%= booking.amountamount_paid? "PAID" : "NOT PAID"%></td>
          <td>
            <a href="/confirmspotcheckin/<%= booking.id %>">Check-in</a> |
            <a href="/confirmspotcheckout/<%= booking.id %>">Check-out</a>
          </td>
        </tr>
        <%})%>
      </table>
      <h3>Rooms</h3>
      <table class="room-bookings-table">
        <tr>
          <th>Booking ID</th>
          <th>Client Name</th>
          <th>Room ID</th>
          <th>Booking Date</th>
          <th>Booking status</th>
          <th>Payment status</th>
          <th>Actions</th>
        </tr>
        <% roombookings.forEach(booking => { %>
        <tr>
          <td><%= booking.id %></td>
          <td><%= booking.full_name %></td>
          <td><%= booking.room %></td>
          <td><%= booking.checkin_date.toDateString() %></td>
          <td><%= booking.booking_status></td>
          <td><%= booking.amount_paid? "PAID" :"NOT PAID" %></td>
          <td>
            <a href="/confirmroomCheckin/<%= booking.id %>">Check-in</a> |
            <a href="/confirmroomCheckout/<%= booking.id %>">Check-out</a>
          </td>
        </tr>
        <%})%>
      </table>
    </section>

    <!--Receptionist dashboard 
   view all bookings and their status upto one week
   view all booking payments status
   confirm checkin checkout
   view all clients details 
   view  all rooms and their satus
   view all spots and their status-->
  </body>
</html>
